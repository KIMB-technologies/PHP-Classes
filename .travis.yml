language: php
php:
  - '7.3'
  
addons:
  apt:
    packages:
      - graphviz

before_script: 
  - curl -L http://phpdoc.org/phpDocumentor.phar --output ./phpdoc.phar
  - php ./doc_prepare.php

script: php ./phpdoc.phar -d ./php/classes -t ./docs

deploy:
- provider: pages
  github-token: $GITHUB_TOKEN
  local-dir: "./docs/"
  skip-cleanup: true
  on:
    branch: master
